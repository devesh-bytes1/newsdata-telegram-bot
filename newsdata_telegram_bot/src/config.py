from dataclasses import dataclass
from os import getenv
from pathlib import Path

from dotenv import load_dotenv

BASE_DIR = Path(__file__).resolve().parent.parent
print(BASE_DIR)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
env_path = BASE_DIR / ".env"
if env_path.is_file():
    load_dotenv(env_path)


@dataclass(frozen=True)
class Config:
    telegram_bot_token: str = getenv("TELEGRAM_BOT_TOKEN", "").strip()
    newsdata_api_key: str = getenv("NEWSDATA_API_KEY", "").strip()
    default_language: str = getenv("DEFAULT_LANGUAGE", "en").strip()
    default_news_count: int = int(getenv("DEFAULT_NEWS_COUNT", "5"))

    def validate(self) -> None:
        if not self.telegram_bot_token:
            raise ValueError("TELEGRAM_BOT_TOKEN is required")
        if not self.newsdata_api_key:
            raise ValueError("NEWSDATA_API_KEY is required[](https://newsdata.io)")


settings = Config()
settings.validate()
